Class CountersBoundedBuffer implements the example of the bounded buffer with guards on synchronization counters to specify synchronization on state and on invocation.
Guard specification is expressed within the associated activity class in order to enforce a clear separation between program and control.
Note that because guard specifications are quite modular, they behave quite well against inheritance anomaly.